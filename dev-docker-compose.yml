version: "3"
services:
  backend:
    command: /bin/sh -c "cargo run"
    image: rust
    working_dir: /opt
    volumes:
      - .:/opt:z
    ports:
      - "8008:8008"
      - "8000:8000"
      - "8443:8443"
    environment:
      - URL=http://localhost:8000/
    networks:
      - re
  redis:
    image: redis
    ports:
      - "6379:6379"
    networks:
      - re
networks:
  re:
    external:
      name: infra_redis
